<div id="dpm_settings" class="extension_settings">
    <div class="inline-drawer">
        <div class="inline-drawer-toggle inline-drawer-header">
            <b>Dynamic Prompt Modifier</b>
            <div class="inline-drawer-icon fa-solid fa-circle-chevron-down down"></div>
        </div>
        <div class="inline-drawer-content">
            <!-- Enable Extension -->
            <div class="marginBot10">
                <label class="checkbox_label" for="dpm_enabled">
                    <input id="dpm_enabled" type="checkbox" checked />
                    <span>Enable Extension</span>
                </label>
                <small class="notes">Turn the extension on or off</small>
            </div>

            <!-- Trigger Mode -->
            <div class="title_restorable">
                <h4>Trigger Mode</h4>
            </div>

            <div class="marginBot10">
                <label for="dpm_trigger_mode" class="checkbox_label">
                    <span>When to Update</span>
                </label>
                <select id="dpm_trigger_mode" class="text_pole">
                    <option value="manual">Manual (button only)</option>
                    <option value="every_message">After every character message</option>
                    <option value="interval">Every X character messages</option>
                </select>
                <small class="notes">Choose when generations should be automatically executed</small>
            </div>

            <div class="marginBot10" id="dpm_interval_container">
                <label for="dpm_message_interval" class="checkbox_label">
                    <span>Message Interval</span>
                </label>
                <input id="dpm_message_interval" class="text_pole" type="number" min="1" max="20" value="3" />
                <small class="notes">Execute generations after this many character messages (only for interval mode)</small>
            </div>

            <div class="marginBot5">
                <label class="checkbox_label" for="dpm_generate_on_user_message">
                    <input id="dpm_generate_on_user_message" type="checkbox" checked />
                    <span>Generate on User Message</span>
                </label>
                <small class="notes">Also generate on user message</small>
            </div>

            <!-- Monitor Options -->
            <div class="title_restorable">
                <h4>Monitor Options</h4>
            </div>

            <div class="marginBot10">
                <label class="checkbox_label" for="dpm_show_monitor">
                    <input id="dpm_show_monitor" type="checkbox" checked />
                    <span>Show Generations Monitor Window</span>
                </label>
                <small class="notes">Display a floating window showing all generations and their current state</small>
            </div>

            <!-- Generations List -->
            <div class="title_restorable">
                <h4>Generations</h4>
            </div>

            <div class="dpm-generations-header">
                <p class="notes">Configure multiple generations to execute in order. Each can edit a prompt or append to messages.</p>
                <button id="dpm_add_generation" class="menu_button">
                    <i class="fa-solid fa-plus"></i> Add Generation
                </button>
            </div>

            <div id="dpm_generations_list" class="dpm-generations-list">
                <!-- Generations will be rendered here -->
            </div>

        </div>
    </div>
</div>